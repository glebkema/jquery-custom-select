/*!
  * jQuery Stylize Select Plugin
  * Description: This plugin adds HTML blocks around the <select> field and creates the necessary event handlers. All that remains is to style these blocks with CSS.
  * Copyright (c) 2019 Gleb Kemarsky, https://github.com/glebkema/jquery-stylize-select
  * Based on https://codepen.io/wallaceerick/pen/ctsCz by Wallace Erick
  * Licensed under the MIT license
  * Version: 0.5.6
  */
!function(v){v.fn.stylizeSelect=function(e){var s,p,u="active";return s=e&&e.classSelect?e.classSelect:"string"==typeof e?e:".stylize-select",p=v.extend({classSelect:s,classDisabled:s+"__disabled",classHidden:s+"__hidden",classList:s+"__list",classSelected:s+"__selected",classStyled:s+"__styled"},e),this.each(function(){var a,e,s,t,l=v(this),c=l.children("option"),i=c.length;l.hide().wrap(v("<div />",{class:p.classSelect.slice(1)})).after(v("<div />",{class:p.classStyled.slice(1),tabindex:0})),a=l.next(p.classStyled),e=v("<ul />",{class:p.classList.slice(1)}).insertAfter(a);for(var n=0;n<i;n++){var o=c.eq(n);v("<li />",{class:((o.attr("class")?o.attr("class"):"")+(o.prop("disabled")?" "+p.classDisabled.slice(1):"")+(o.prop("hidden")?" "+p.classHidden.slice(1):"")).trim(),html:o.data("html")||o.text(),rel:o.val(),style:o.attr("style"),tabindex:0}).appendTo(e)}function r(){a.removeClass(u),e.hide()}function d(){a.find("."+u).not(this).each(function(){v(this).removeClass(u).next(p.classList).hide()}),a.toggleClass(u).next(p.classList).toggle()}function h(){a.hasClass(u)?r():d()}function f(s){s&&!s.hasClass(p.classDisabled.slice(1))&&(a.html(s.html()).attr("style",function(){var e=s.attr("style");return e||null}),s.addClass(p.classSelected.slice(1)).siblings(p.classSelected).removeClass(p.classSelected.slice(1)),l.val(s.attr("rel")).change(),r())}s=e.children("li"),f((t=l.prop("selectedIndex"))<0?null:s.eq(t)),l.parent(p.classSelect).focusout(function(e){this.contains(e.relatedTarget)||r()}),a.click(function(){return h(),!1}).keydown(function(e){switch(e.charCode||e.keyCode||e.which){case 27:e.stopPropagation(),r();break;case 13:case 32:e.preventDefault(),e.stopPropagation(),h();break;case 38:a.hasClass(u)&&(e.preventDefault(),e.stopPropagation(),r());break;case 40:e.preventDefault(),e.stopPropagation(),a.hasClass(u)?s.not(":hidden").first().focus():d()}}),s.click(function(e){e.stopPropagation(),f(v(this)),a.focus()}).keydown(function(e){var s,t;switch(e.charCode||e.keyCode||e.which){case 27:e.stopPropagation(),r(),a.focus();break;case 13:case 32:e.preventDefault(),e.stopPropagation(),f(v(this)),a.focus();break;case 38:e.preventDefault(),e.stopPropagation(),(t=v(this).prevAll(":visible:first")).length?t.focus():a.focus();break;case 40:e.preventDefault(),e.stopPropagation(),(s=v(this).nextAll(":visible:first")).length&&s.focus()}}),v(document).click(r)}),this}}(jQuery);